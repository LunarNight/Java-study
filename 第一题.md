import java.io.BufferedReader;
import java.io.File;  
import java.io.IOException;  
import java.io.InputStreamReader;
import com.drew.imaging.ImageProcessingException;  
import com.drew.imaging.jpeg.JpegMetadataReader;  
import com.drew.metadata.Metadata;  
import com.drew.metadata.MetadataException;   
import com.drew.metadata.exif.ExifIFD0Directory;
import com.drew.metadata.exif.GpsDirectory;  

  
public class L {  
    public static File loca;
    public static String location;
    public static void  getinformation(File location)throws MetadataException,ImageProcessingException,IOException {
        Metadata meta = JpegMetadataReader.readMetadata(location);  
        GpsDirectory gps = meta.getDirectory(GpsDirectory.class); //GPS信息        
        ExifIFD0Directory ex4 = meta.getDirectory(ExifIFD0Directory.class);//照相机制造商,型号,程序名称,拍摄时间
        String[] dateinformation =ex4.getTags().toString().split(",");
        for(int i=0;i<dateinformation.length;i++){        //选出日期和厂家
        	if(dateinformation[i].startsWith(" [Exif IFD0] Date/Time")||dateinformation[i].startsWith(" [Exif IFD0] Make")) {
        		System.out.println(dateinformation[i]);
        	}
        }
        String[] gpsinformation = gps.getTags().toString().split(",");
        for(int  i=1;i<5;i++) {           //获取GPS信息
        	System.out.println(gpsinformation[i]);
        }
    }
    public L () {
    	System.out.println("请输入指定路径");
    	BufferedReader lo = new BufferedReader(new InputStreamReader(System.in));
    	try {
			location = lo.readLine();
			File file = new File(location);
			File[] files = file.listFiles();
			for(int i = 0;i<files.length;i++) {
				if(new String(files[i].getName()).endsWith(".jpg")) {  //选出JPG格式的文件
					System.out.println("名字是"+files[i].getName());
					getinformation(files[i]);
				}
			}
		}catch(Exception e) {
			e.printStackTrace();
		}
    }
    public static void main(String[] args) {
    	new L();
    }  
} 
